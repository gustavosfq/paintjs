function PaintJS(t,e,n){function i(t,e,n){d=document.querySelectorAll(t)[0],c=d.getContext("2d"),d.width=e||0,d.height=n||0,d.style.cursor="crosshair",d.addEventListener("mousedown",function(t){f.state=!0,g={color:f.color,size:f.size,points:[]},u.push(g),o(t)}),d.addEventListener("mousemove",function(t){f.state&&o(t)}),d.addEventListener("mouseup",function(t){f.state=!1,o(t)})}function o(t){g.points.push({x:t.offsetX,y:t.offsetY}),s()}function r(t,e){(a=new Image).crossOrigin="Anonymous",a.onload=function(n){if(n=n.path[0],e){e/=100;var i=n.width/n.height;n.width>n.height?(d.width=window.innerWidth*e,d.height=window.innerWidth*e/i):(d.height=window.innerHeight*e,d.width=window.innerHeight*e*i)}else d.width=n.width,d.height=n.height;d.style.background="url("+t+") no-repeat center center",d.style.backgroundSize=d.width+"px "+d.height+"px"},a.src=t}function h(t,e){e.size=e.size||"",e.type=e.type||"";var n;n="original"===e.size?a:d;var i=document.createElement("canvas"),o=i.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",i.width=n.width,i.height=n.height,o.drawImage(a,0,0,n.width,n.height),r.onload=function(){o.drawImage(r,0,0,n.width,n.height),"function"==typeof t&&("blob"===e.type.toLowerCase()?i.toBlob(function(e){t(e)}):t(i.toDataURL()))},r.src=d.toDataURL()}function s(){c.clearRect(0,0,d.width,d.height),c.lineCap="round";for(var t=0;t<u.length;t++){var e=u[t];c.strokeStyle=e.color,c.lineWidth=e.size,c.beginPath(),c.moveTo(e.points[0].x,e.points[0].y);for(var n=0;n<e.points.length;n++){var i=e.points[n];c.lineTo(i.x,i.y)}c.stroke()}}var d,c,a,u=[],g={},f={draw:!1,color:"#000000",size:10};return t&&i(t,e,n),{setTarget:function(t,e,n){d?console.error("target is defined!"):i(t,e,n)},width:function(t){return arguments[0]?void(d.width=t):d.width},height:function(t){return arguments[0]?void(d.height=t):d.height},color:function(t){return arguments[0]?void(f.color=t):f.color},size:function(t){return arguments[0]?void(f.size=t):f.size},undo:function(){u.pop(),s()},clear:function(){u=[],s()},setBackground:function(t,e){r(t,e)},getImage:function(t,e){return e=e||{},h(t,e)}}}